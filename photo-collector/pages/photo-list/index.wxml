<view class="container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="title">ç…§ç‰‡åˆ—è¡¨</view>
    <view class="subtitle" wx:if="{{projectName}}">
      {{projectName}} {{locationName ? ' - ' + locationName : ''}}
    </view>
  </view>
  
  <!-- åŠ è½½ä¸­ -->
  <block wx:if="{{loading}}">
    <view class="loading-container">
      <view class="loading-spinner"></view>
      <text>åŠ è½½ç…§ç‰‡ä¸­...</text>
    </view>
  </block>
  
  <!-- ç…§ç‰‡åˆ—è¡¨ -->
  <block wx:else>
    <scroll-view scroll-y="true" class="photo-list">
      <block wx:if="{{photos.length > 0}}">
        <view class="photo-grid">
          <view 
            wx:for="{{photos}}" 
            wx:key="id" 
            class="photo-item"
            bindtap="handlePhotoTap"
            data-id="{{item.id}}">
            <image 
              class="photo-thumb" 
              src="{{item.thumbPath || item.filePath}}" 
              mode="aspectFill" 
              lazy-load>
            </image>
            <view class="photo-info">
              <text class="photo-time">{{item.createTime}}</text>
              <view class="photo-status {{item.uploaded ? 'uploaded' : ''}}">
                {{item.uploaded ? 'å·²ä¸Šä¼ ' : 'æœªä¸Šä¼ '}}
              </view>
            </view>
          </view>
        </view>
      </block>
      <block wx:else>
        <view class="empty-list">
          <view class="empty-icon">ğŸ“·</view>
          <view class="empty-text">æš‚æ— ç…§ç‰‡</view>
          <view class="empty-tip">ç‚¹å‡»ä¸‹æ–¹"æ‹ç…§"æŒ‰é’®å¼€å§‹é‡‡é›†ç…§ç‰‡</view>
        </view>
      </block>
    </scroll-view>
    
    <!-- åº•éƒ¨æ“ä½œæ  -->
    <view class="action-bar">
      <view class="action-btn back-btn" bindtap="navigateBack">è¿”å›</view>
      <view class="action-btn camera-btn" bindtap="goToCamera">æ‹ç…§</view>
    </view>
  </block>
  
  <!-- æ“ä½œèœå• -->
  <view class="action-sheet-mask" wx:if="{{showActionSheet}}" bindtap="closeActionSheet"></view>
  <view class="action-sheet" wx:if="{{showActionSheet}}">
    <view class="action-sheet-title">ç…§ç‰‡æ“ä½œ</view>
    <view class="action-sheet-content">
      <view 
        wx:for="{{actions}}" 
        wx:key="name" 
        class="action-item"
        style="color: {{item.color}}"
        bindtap="handleActionSelect"
        data-index="{{index}}">
        {{item.name}}
      </view>
    </view>
    <view class="action-cancel" bindtap="closeActionSheet">å–æ¶ˆ</view>
  </view>
</view> 