<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>
  
  <!-- é”™è¯¯æç¤º -->
  <view class="error" wx:if="{{error}}">
    <view class="error-text">{{error}}</view>
    <view class="error-retry" bindtap="handleRefresh">é‡è¯•</view>
  </view>
  
  <block wx:if="{{!loading && !error && trace}}">
    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <view class="toolbar">
      <view class="toolbar-left" bindtap="handleBack">
        <text class="icon-back">â†</text>
        <text>è¿”å›</text>
      </view>
      <view class="toolbar-title">ç•™ç—•è¯¦æƒ…</view>
      <view class="toolbar-right" bindtap="handleShare">
        <text>åˆ†äº«</text>
      </view>
    </view>
    
    <!-- å¤´éƒ¨ä¿¡æ¯ -->
    <view class="header">
      <view class="title">{{trace.title || 'æ— æ ‡é¢˜'}}</view>
      <view class="meta">
        <view class="type">{{typeName}}</view>
        <view class="time">{{trace.updatedAt}}</view>
        <view class="status {{trace.syncStatus === 'synced' ? 'synced' : 'local'}}">
          {{trace.syncStatus === 'synced' ? 'å·²åŒæ­¥' : 'æœ¬åœ°'}}
        </view>
      </view>
    </view>
    
    <!-- ç…§ç‰‡åŒºåŸŸ -->
    <view class="photo-section" wx:if="{{photos.length > 0}}">
      <view class="section-title">ç…§ç‰‡ ({{photos.length}})</view>
      <view class="photo-grid">
        <view 
          class="photo-item" 
          wx:for="{{photos}}" 
          wx:key="id" 
          data-index="{{index}}" 
          bindtap="handlePreviewPhoto">
          <image class="photo" src="{{item.path}}" mode="aspectFill" />
        </view>
      </view>
    </view>
    
    <!-- å†…å®¹åŒºåŸŸ -->
    <view class="content-section">
      <view class="section-title">å†…å®¹</view>
      <view class="content">
        <text>{{trace.content || 'æš‚æ— å†…å®¹'}}</text>
      </view>
    </view>
    
    <!-- åº•éƒ¨æ“ä½œåŒº -->
    <view class="footer">
      <view class="action-list">
        <view class="action-item" bindtap="handleEdit">
          <view class="action-icon">âœï¸</view>
          <view class="action-text">ç¼–è¾‘</view>
        </view>
        <view class="action-item" bindtap="handleShare">
          <view class="action-icon">ğŸ”„</view>
          <view class="action-text">åˆ†äº«</view>
        </view>
        <view class="action-item danger" bindtap="handleDelete">
          <view class="action-icon">ğŸ—‘ï¸</view>
          <view class="action-text">åˆ é™¤</view>
        </view>
      </view>
    </view>
  </block>
</view> 