# B1基础照片采集功能 - 极端测试套件：资源极限

> 创建日期：2024-04-06  
> 版本：1.0  
> 负责人：测试团队  

## 概述

本测试套件专注于验证B1基础照片采集功能在设备资源极限状态下的稳定性和性能表现。通过模拟各种资源受限场景，如内存不足、CPU高负载、存储空间不足和电量不足等极端条件，评估应用的容错能力和资源管理策略。

## 1. 内存资源限制测试

### 测试用例 RS-MEM-001：低内存环境下连续拍照测试

**目标**：验证在设备可用内存极低情况下，连续拍照功能的稳定性和内存管理

**前置条件**：
- 测试设备可用内存被限制在100MB以下
- 应用已正常启动并进入拍照页面
- 已配置内存监控工具跟踪内存使用情况

**测试步骤**：
1. 使用内存压力工具将设备可用内存压缩至100MB以下
2. 启动应用并进入拍照界面
3. 连续拍摄30张照片，间隔1秒
4. 观察拍照过程和应用表现
5. 检查所有照片是否正确保存
6. 分析内存使用曲线

**预期结果**：
- 应用应保持稳定，不出现闪退或无响应情况
- 所有照片应正确拍摄并保存，无损坏文件
- 内存管理机制应能正确回收临时资源
- 应用应主动释放非必要内存资源
- UI响应虽可能出现短暂延迟，但不应完全无响应

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-MEM-002：低内存环境下照片浏览测试

**目标**：验证在设备可用内存极低情况下，照片浏览功能的稳定性和内存管理

**前置条件**：
- 测试设备可用内存被限制在100MB以下
- 应用已拍摄至少20张照片
- 已配置内存监控工具跟踪内存使用情况

**测试步骤**：
1. 使用内存压力工具将设备可用内存压缩至100MB以下
2. 进入照片浏览界面
3. 快速滑动浏览所有照片（每张停留不超过1秒）
4. 来回切换照片10次
5. 放大/缩小查看3张不同照片的细节
6. 分析内存使用曲线

**预期结果**：
- 应用保持稳定，不出现闪退或无响应情况
- 照片浏览过程流畅，虽可能出现短暂延迟但不应持续卡顿
- 图片加载策略应优化为按需加载，不一次性加载全部大图
- 切换过程中应正确释放不再显示照片占用的内存
- 内存使用曲线应显示合理的波动而非持续增长

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-MEM-003：内存临界值下照片切换测试

**目标**：验证在内存使用接近系统警告值时照片切换的处理逻辑

**前置条件**：
- 测试设备内存被占用至临界警告值（系统发出低内存警告）
- 应用已拍摄至少10张高清照片
- 已配置内存监控工具跟踪内存使用情况

**测试步骤**：
1. 使用后台应用和内存压力工具将设备内存占用至系统发出低内存警告
2. 开启内存监控工具
3. 进入照片浏览界面
4. 迅速在大图预览模式下来回切换5张照片
5. 暂停30秒观察内存使用情况
6. 继续快速切换预览10张照片
7. 分析整个过程的内存使用曲线

**预期结果**：
- 应用应始终保持响应，不出现ANR或崩溃
- 低内存警告触发后应用应采取内存优化措施
- 图片预览应采用渐进式加载或降级显示策略
- 不再浏览的照片资源应及时释放
- 若出现内存不足情况，应优雅降级而非直接崩溃

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-MEM-004：内存回收后的功能恢复测试

**目标**：验证在系统强制回收应用内存后，应用的恢复能力和状态保存

**前置条件**：
- 测试设备配置为积极的内存回收策略
- 应用已拍摄至少5张照片并处于后台状态
- 已准备其他大型应用用于触发系统内存回收

**测试步骤**：
1. 使用应用拍摄5张照片并进入浏览界面
2. 将应用切换至后台
3. 启动多个内存密集型应用（如3D游戏、视频编辑软件），迫使系统回收内存
4. 确认系统已回收部分应用内存（通过内存监控工具）
5. 返回测试应用
6. 验证应用状态和功能是否恢复正常
7. 检查之前拍摄的照片是否仍能正确访问

**预期结果**：
- 应用应能从内存回收状态正常恢复
- 之前的会话状态应合理保存，可能恢复到上次浏览的照片或主界面
- 所有已拍摄照片应完好无损并可访问
- 应用应能重新初始化关键功能，如相机预览
- 用户无需重新登录或执行额外步骤即可继续使用

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

## 2. CPU资源限制测试

### 测试用例 RS-CPU-001：高CPU占用下拍照响应测试

**目标**：验证在设备CPU高负载情况下，拍照功能的响应性和稳定性

**前置条件**：
- 测试设备CPU负载被人为提升至80%以上
- 应用已正常启动并进入拍照页面
- 已配置性能监控工具跟踪CPU使用和UI响应时间

**测试步骤**：
1. 使用CPU压力工具将设备CPU占用率提升至80%以上
2. 启动应用并进入拍照界面
3. 测量相机预览初始化时间
4. 连续点击拍照按钮10次，每次间隔3秒
5. 记录从点击到拍照完成的响应时间
6. 切换前后摄像头并再次拍照5次
7. 分析整个过程的应用表现和响应时间

**预期结果**：
- 应用应保持功能正常，不出现崩溃
- 拍照响应时间可能延长，但不应超过正常状态的3倍
- 所有拍摄的照片应正确保存，无损坏
- 相机预览可能出现帧率下降，但不应低于10fps
- 切换摄像头操作应成功完成，虽可能有延迟

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-CPU-002：CPU峰值下照片处理测试

**目标**：验证在CPU资源极度紧张的情况下，照片处理和保存的可靠性

**前置条件**：
- 测试设备CPU负载被人为提升至95%以上
- 应用已正常启动并拍摄了3张照片
- 已配置性能监控工具跟踪CPU使用情况

**测试步骤**：
1. 使用CPU压力工具将设备CPU占用率提升至95%以上
2. 在应用中拍摄一张高清照片
3. 立即尝试应用内置的照片编辑功能（如裁剪、滤镜）
4. 保存编辑后的照片
5. 重复步骤2-4三次，每次使用不同的编辑操作
6. 检查所有照片是否正确保存
7. 分析整个过程的CPU使用曲线和应用响应时间

**预期结果**：
- 照片处理功能应继续工作，尽管可能较慢
- 所有照片应正确保存，编辑效果符合预期
- 应用应实施处理任务优先级排序，确保核心功能可用
- UI响应可能延迟，但不应完全无响应超过5秒
- 应用应提供处理进度指示，避免用户误判为应用无响应

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-CPU-003：CPU资源竞争环境下的启动测试

**目标**：验证在系统CPU资源紧张情况下，应用的启动性能和初始化逻辑

**前置条件**：
- 测试设备上运行多个CPU密集型后台任务
- CPU使用率保持在85%以上
- 应用已完全关闭（非后台状态）

**测试步骤**：
1. 通过启动多个CPU密集型应用将系统CPU使用率保持在85%以上
2. 记录启动时间点
3. 启动测试应用
4. 计时直到应用完全加载并可交互
5. 测试相机预览是否正常初始化
6. 尝试拍摄一张照片
7. 分析整个启动过程的CPU使用情况和时间消耗

**预期结果**：
- 应用应能成功启动，虽可能较平时慢
- 启动超时不应超过正常状态的3倍
- 应用应优先初始化核心功能，可能延迟加载非关键功能
- 相机预览应正常初始化并可用
- 拍照功能应正常工作
- 应用应合理处理启动过程中的资源竞争

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

## 3. 存储空间限制测试

### 测试用例 RS-STG-001：存储空间接近满时拍照测试

**目标**：验证在设备存储空间接近用尽时拍照功能的可靠性和错误处理

**前置条件**：
- 测试设备存储空间剩余量控制在100MB以内
- 应用已正常启动并进入拍照页面
- 了解单张照片预计占用空间大小

**测试步骤**：
1. 使用大文件或工具将设备存储空间占用至剩余不足100MB
2. 启动应用并进入拍照界面
3. 连续拍摄照片，预计会导致存储空间用尽
4. 观察应用在存储空间不足前的提示机制
5. 继续尝试拍照直至存储空间完全用尽
6. 记录应用的错误处理方式和用户提示
7. 检查已拍摄照片的完整性

**预期结果**：
- 应用应在存储空间即将用尽时提供明确的警告
- 应用应显示当前剩余空间可拍摄的大致照片数量
- 存储空间用尽时，应提供友好的错误提示，而非崩溃
- 所有成功拍摄的照片应完好无损
- 应用应提供可行的解决建议（如删除旧照片）

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-STG-002：存储空间用尽时的错误处理测试

**目标**：验证在设备存储空间完全用尽时，应用的错误处理机制和数据保护能力

**前置条件**：
- 测试设备存储空间控制在极低水平（<20MB）
- 应用已正常启动并已拍摄几张照片
- 准备一些大文件用于快速填满剩余存储空间

**测试步骤**：
1. 启动应用并进入拍照界面
2. 拍摄一张照片并确认保存成功
3. 在不退出应用的情况下，通过其他手段（如文件管理器复制大文件）填满设备存储空间
4. 返回应用并尝试再次拍照
5. 观察错误提示和应用行为
6. 尝试浏览之前拍摄的照片
7. 删除一些文件释放空间后，测试应用功能是否恢复

**预期结果**：
- 存储空间用尽时，应用应提供清晰的错误信息
- 应用不应崩溃或进入不可用状态
- 之前成功保存的照片应仍可访问
- 应用应保护未完成存储的临时数据或提供恢复机制
- 存储空间恢复后，应用功能应正常恢复
- 应用应实施数据安全策略，避免因存储问题导致的数据损坏

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-STG-003：清理空间后恢复功能测试

**目标**：验证在存储空间从用尽状态恢复后，应用功能的自动恢复能力

**前置条件**：
- 执行完RS-STG-002测试，设备处于存储空间用尽状态
- 应用仍在运行中

**测试步骤**：
1. 确认当前应用因存储空间用尽而无法拍照
2. 不退出应用，通过系统工具删除一些大文件，释放至少200MB空间
3. 返回应用，观察是否有存储状态更新提示
4. 尝试拍照功能是否自动恢复
5. 拍摄3张新照片
6. 检查照片浏览和编辑功能是否正常
7. 重启应用，验证所有功能是否恢复正常

**预期结果**：
- 应用应能检测到存储空间状态变化
- 拍照功能应自动恢复，无需用户手动刷新或重启应用
- 新拍摄的照片应正确保存并可访问
- 照片浏览和编辑功能应正常工作
- 应用重启后应保持所有功能正常
- 应用可能提供关于存储空间恢复的通知

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

## 4. 电池资源限制测试

### 测试用例 RS-BAT-001：低电量环境下连续拍照测试

**目标**：验证在设备电量极低情况下，连续拍照功能的可靠性和电池优化策略

**前置条件**：
- 测试设备电量控制在15%以下，启用低电量模式
- 应用已正常启动并进入拍照页面
- 已配置电量监控工具跟踪电量消耗

**测试步骤**：
1. 将设备电量控制在15%以下并开启系统低电量模式
2. 启动应用并进入拍照界面
3. 连续拍摄15张照片，每张间隔3秒
4. 检查每张照片的质量和保存状态
5. 观察应用在低电量模式下的性能和功耗调整
6. 将设备电量进一步降至5%以下
7. 继续拍摄5张照片并检查结果

**预期结果**：
- 应用应在低电量模式下正常工作
- 可能采取电量优化措施，如降低预览分辨率或帧率
- 所有拍摄的照片应正确保存，无损坏
- 极低电量下(5%以下)应可能提示用户电量风险
- 应用不应因低电量导致异常耗电或崩溃
- 功能可能降级但核心拍照能力应保持可用

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

### 测试用例 RS-BAT-002：省电模式下的功能表现测试

**目标**：验证在系统省电模式下，应用各项功能的性能表现和用户体验

**前置条件**：
- 测试设备已开启系统级极限省电模式
- 应用已正常启动并拍摄了几张照片
- 已配置电量监控工具跟踪应用能耗

**测试步骤**：
1. 开启设备的极限省电模式（如电池省电/超级省电模式）
2. 启动应用并测量启动时间
3. 进入拍照界面，观察预览质量和响应性
4. 拍摄3张照片，进入编辑界面进行基本编辑
5. 测试照片浏览性能，连续切换10张照片
6. 尝试所有主要功能点，记录响应时间和稳定性
7. 测量整个测试过程的电量消耗

**预期结果**：
- 应用应在省电模式下保持所有核心功能可用
- 可能采取功耗优化措施，如降低刷新率、后台处理延迟等
- 用户体验可能降级但不应严重影响可用性
- 电量消耗应明显低于正常模式
- 照片质量和存储不应受到负面影响
- 应用应适应系统资源限制，不强制请求更多资源

**完成状态**：
- [ ] 未开始
- [ ] 执行中
- [ ] 已完成
- [ ] 已跳过

**测试结果**：
- [ ] 通过
- [ ] 失败
- [ ] 阻塞

**问题记录**：

## 测试结果汇总

| 测试用例ID | 测试结果 | 问题ID | 备注 |
|-----------|--------|-------|------|
| RS-MEM-001 | | | |
| RS-MEM-002 | | | |
| RS-MEM-003 | | | |
| RS-MEM-004 | | | |
| RS-CPU-001 | | | |
| RS-CPU-002 | | | |
| RS-CPU-003 | | | |
| RS-STG-001 | | | |
| RS-STG-002 | | | |
| RS-STG-003 | | | |
| RS-BAT-001 | | | |
| RS-BAT-002 | | | |

## 测试结论

*请在测试完成后填写：*

## 发现的主要问题

*请在测试完成后填写：*

## 建议

*请在测试完成后填写：*

---

**版本历史**

| 版本号 | 修改日期 | 修改内容 | 修改人 |
|-------|---------|---------|-------|
| 1.0 | 2024-04-06 | 创建文档 | 测试团队 | 