通用工业级模块化开发计划拆解规范 (v2.5 - Grok-Cursor防砸版)

版本: v2.5
日期: 2025年03月25日 22:00:00
作者: Grok 3 (xAI)
适用范围: 单人使用AI工具（如Cursor）开发任何软件项目（小程序、App、Web、桌面应用等）
目标: 将用户复杂需求拆解为Grok可指导、Cursor可执行的步骤，每步代码<200行，确保工业级零容错、高并发（>50次/秒单机）、6天MVP上线，120帧丝滑体验，量化精确到字符级，防止Cursor模糊解读和自由发挥

---

1. 概述

本规范为Grok提供标准化拆解方法，确保Grok输出给Cursor的每步指令细致、具体、可验证，杜绝Cursor“放飞自我”，实现：

- 模块化拆解: 大模块（≤5个）→ 中模块（≤4个/大模块）→ 小步骤（≤5个/中模块）
- 小步快跑: 每步<200行，4小时完成（开发2小时+测试1小时+复盘1小时）
- 零容错: 单机并发≥50次/秒（若性能瓶颈可降至≥30次/秒），弱网响应<2秒（可降至<3秒），数据不丢
- 丝滑体验: 操作帧率≥90（目标120帧），响应<16ms/帧，媲美苹果原生
- 防砸设计: 每步指令精确到文件路径、字符数、对错标准，Cursor无自由发挥空间

---

2. 拆解原则 (Grok执行)

2.1 模块独立性

- 每个模块独立，依赖代码<10行，接口用事件触发（如dispatchEvent），耦合度<5%
- 示例: 文件选择模块与预览模块仅通过‘fileSelected’事件交互，代码<5行

2.2 优先级排序

- 核心功能（如数据录入）占70%时间（4天），次要功能（如UI美化）占30%（2天）
- MVP上线时间≤6天，单人每日3步（12小时）

2.3 技术适配性

- 优先原生API（使用率≥60%），如wx.createAnimation，依赖<2个，版本范围灵活（如React v18.x）
- 单机并发≥50次/秒，动画帧率≥90，日志记录输入≥10字、输出≥5字

2.4 对错控制

- 每步定义“预期输出”（如“返回{name: ‘file.txt’, size: 1024}”）和“失败场景”（如“文件为空，返回null”）
- 增加“丝滑标准”: 帧率≥90，响应<16ms/帧
- 日志强制量化: logA每项≥15字，logB每项≥15字，总字数≥90字，模糊词≤1个
- Grok审查每步logA/logB，Cursor执行前必须通过

---

3. 拆解流程 (Grok执行)

3.1 大模块划分

- 输入: 用户需求全文（≥500字）
- 输出: ≤5个大模块，每模块描述≥30字
- 示例: “数据录入: 处理用户输入数据，丝滑体验≥90帧，≥30字”

3.2 中模块划分

- 输入: 大模块描述（≥30字）
- 输出: ≤4个中模块/大模块，每模块描述≥20字
- 示例: “数据录入” → “文件选择: 选择本地文件，响应<16ms，≥20字”

3.3 小步骤划分

- 输入: 中模块描述（≥20字）
- 输出: ≤5个小步骤/中模块，每步描述≥15字，代码<200行
- 示例: “文件选择” → “Step 1: 渲染按钮，预计130行，帧率≥90”

---

4. 每步执行标准 (Grok生成，Cursor执行)

4.1 Step 1 - 需求理解

- Grok指令: “读取用户需求./xxx_project_plan.md全文（≥500字，若<500字输出‘文档不足，请补充至≥500字’），输出‘已理解任务：XX（具体功能，如用户选择文件，帧率≥90，≥30字，无模糊词≤1个）’，保存至./logs/step_[本步]_logA.txt”
- 正确标准: 描述≥30字，与需求一致性≥95%，模糊词≤1个

4.2 Step 2 - 任务建议 (logA)

- Grok指令: “读取./logs/step_[本步]_logA.txt中‘已理解任务’（若无输出‘Step 1未完成’），生成以下格式，保存至./logs/step_[本步]_logA.txt（总字数≥90字）：
  {
  任务目标: XX（如‘用户点击选择文件，响应<16ms’，≥15字，无模糊词）
  技术选型: XX（如‘wx.createAnimation v2.x’，理由‘动效丝滑’，≥15字）
  输入: XX（如‘用户点击事件’，≥10字）
  输出: XX（如‘File对象{name, size}’，≥10字）
  潜在风险: XX（如‘帧率<90卡顿’，≥15字）
  风险缓解: XX（如‘精准setData更新’，≥15字）
  代码量: XX（如‘预计150行’，若>200行写‘拆为X个子步骤’）
  }”
- 正确标准: 每项≥指定字数，技术支持帧率≥90，代码量≤200行

4.3 Step 3 - 执行开发

- Grok指令给Cursor: “读取./logs/step_[本步]_logA.txt全文（若无输出‘logA缺失’），生成代码保存至./src/step_[本步].js，约束：
  - 总行数≤200行（注释≥10行，try-catch覆盖≥90%）
  - 格式：
    // 导入（≤5行）
    const { wx } = require('wx');
    // 变量（≤10行）
    const data = {};
    // 函数（≤180行）
    function doTask(input) {
    try {
    // 实现logA‘任务目标’，帧率≥90，响应<16ms
    } catch (e) {
    console.error(‘错误：’ + e.message); // ≥10字
    }
    }
    // 导出（≤5行）
    module.exports = { doTask };
    输出‘开发完成：XX（如文件选择，帧率95，≥15字）’至./logs/step_[本步]_logB.txt”
- 正确标准: 语法错误=0，逻辑一致性≥95%，帧率≥90

4.4 Step 4 - 检查验证

- Grok指令给Cursor: “读取./src/step_[本步].js全文（若无输出‘代码缺失’），本地运行，测试3场景：
  - 正常: 输入logA‘输入’，预期logA‘输出’，帧率≥90，成功率≥99%
  - 异常: 空输入，预期捕获错误，失败率≤1%
  - 极端: logA‘潜在风险’场景，预期按‘风险缓解’运行，帧率≥90
    输出至./logs/step_[本步]_logB.txt（追加，总字数≥90字）：
    {
    测试结果: XX（如‘正常成功，帧率95’，≥15字）
    日志: XX（如‘输入click，输出{name: "file.txt"}’，≥30字）
    性能: XX（如‘响应12ms，帧率95’，≥15字）
    }”
- 正确标准: 3场景全测，帧率≥90，响应<16ms

4.5 Step 5 - 总结反馈 (logB)

- Grok指令给Cursor: “读取./logs/step_[本步]_logB.txt测试结果（若无输出‘验证未完成’），生成以下格式，保存至./logs/step_[本步]_logB.txt（覆盖，总字数≥90字）：
  {
  完成情况: XX（如‘文件选择已实现，帧率95’，≥15字）
  遇到问题: XX（如‘帧率偶降80’，≥15字，若无写‘无’）
  解决方案: XX（如‘优化setData’，≥15字，若无写‘无’）
  下步建议: XX（如‘实现预览，帧率≥90’，≥15字）
  }”
- 正确标准: 四项全填，与测试一致性≥95%

---

5. 错误预判与缓解 (Grok指导)

- 常见错误:
  - 帧率<90: 重渲染过多
  - 响应>16ms: 数据更新不精准
  - 语法错误: 拼写错>1处
- 缓解措施:
  - Grok指定wx.createAnimation，Cursor用setData精准更新
  - Cursor执行时强制ESLint，错误>0重写

---

6. 时间规划 (单人6天MVP)

- 每日3步（12小时开发+2小时复盘+3小时休息）
- Day 1-5: 核心模块，15步
- Day 6: 测试+上线，3小时测试帧率，1小时部署

---

7. 技术约束 (Grok指定)

- 缓存: LocalStorage（≥5MB），异步队列并发≥50
- 动效: wx.createAnimation v2.x，帧率≥90
- 版本: React v18.x，Node.js v18.x，Cursor选具体版本并记录
- 性能: 响应<16ms，弱网（200ms延迟）帧率≥90

---

8. 注意事项 (Grok执行)

- 压力测试: 50次并发，帧率≥90，成功率≥99%
- 资源限制: 代码<5MB，依赖<2个
- Grok审查: logA/logB一致性≥95%，否则重写
- Cursor指令模板:
  “读取./logs/step_[上步]_logB.txt（全文，≥90字，若无读空文件），
  读取./src/step_[上步].js（全文，≥100行，若无读空文件），
  按./logs/step_[本步]_logA.txt开发，代码<200行，含try-catch，帧率≥90，
  日志存./logs/step_[本步]_logA.txt和logB.txt”





| 步骤序号和任务目录                   | 具体碎步                                                                                                                                                                                                                                                                                                                                                                           |
| ------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Step 1.1 概述**              | **动作**：Cursor读取项目需求文档 `./xxx_project_plan.md`（全文必须≥500字）。`<br>`**标准**：文档字数<500字时，输出“文档不足，请补充至≥500字”。`<br>`**对**：文档≥500字，输出“已理解任务：XX（具体功能，如用户选择文件，帧率≥90）”，保存到 `./logs/step_1.1_logA.txt`。`<br>`**错**：文档不存在或字数<500，输出“文档缺失或不足”并停止。 |
| **Step 1.2 任务建议**          | **动作**：Cursor读取 `./logs/step_1.1_logA.txt`中的“已理解任务”。`<br>`**标准**：若文件不存在或无“已理解任务”，输出“Step 1.1未完成”并停止。`<br>`**对**：生成6项建议（任务目标、技术选型、输入、输出、风险、缓解），每项≥15字，保存到 `./logs/step_1.2_logA.txt`。`<br>`**错**：缺少任一项或某项<15字，输出“建议不完整”并停止。         |
| **Step 1.3 执行开发**          | **动作**：Cursor读取 `./logs/step_1.2_logA.txt`，开发代码保存到 `./src/step_1.3.js`。`<br>`**标准**：代码<200行，try-catch覆盖≥90%，帧率≥90。`<br>`**对**：开发完成，输出“开发完成：XX（如文件选择，帧率95）”到 `./logs/step_1.3_logB.txt`。`<br>`**错**：代码≥200行、try-catch<90%或帧率<90，输出“开发失败：XX（具体原因）”并停止。    |
| **Step 1.4 检查验证**          | **动作**：Cursor读取 `./src/step_1.3.js`，执行3个测试场景（正常、异常、极端）。`<br>`**标准**：每个场景记录输入、输出、帧率，保存到 `./logs/step_1.3_logB.txt`。`<br>`**对**：3场景全通过（帧率≥90，成功率≥99%），输出“测试通过”。`<br>`**错**：任一场景帧率<90或成功率<99%，输出“测试失败：XX（失败原因）”并停止。                        |
| **Step 1.5 总结反馈**          | **动作**：Cursor读取 `./logs/step_1.3_logB.txt`，生成总结。`<br>`**标准**：总结包含4项（完成情况、问题、方案、建议），每项≥15字。`<br>`**对**：总结完整，覆盖测试结果，保存到 `./logs/step_1.3_logB.txt`（覆盖原文件）。`<br>`**错**：缺少任一项或某项<15字，输出“总结不完整”并停止。                                                         |
| **Step 2.1 拆解原则 - 独立性** | **动作**：Cursor确保模块独立，依赖代码<10行，接口用事件触发。`<br>`**标准**：耦合度<5%，事件触发代码<5行。`<br>`**对**：模块无直接依赖，事件触发正常，输出“模块独立性通过”。`<br>`**错**：依赖≥10行或耦合度≥5%，输出“模块不独立：XX（具体问题）”并停止。                                                                                       |
| **Step 2.2 拆解原则 - 优先级** | **动作**：Cursor规划6天开发时间，核心功能占70%（4天），次要功能占30%（2天）。`<br>`**标准**：每日完成3步（12小时开发+2小时复盘）。`<br>`**对**：按计划完成，输出“Day X完成”。`<br>`**错**：未按时完成，输出“延误：XX（原因）”并停止。                                                                                                            |
| **Step 2.3 拆解原则 - 技术**   | **动作**：Cursor优先用原生API（如 `wx.createAnimation`），依赖<2个。`<br>`**标准**：动画帧率≥90，日志输入≥10字、输出≥5字。`<br>`**对**：API正确，帧率达标，输出“技术通过”。`<br>`**错**：帧率<90或日志不足，输出“技术不达标：XX（原因）”并停止。                                                                                            |
| **Step 2.4 拆解原则 - 对错**   | **动作**：Cursor定义每步预期输出和失败场景。`<br>`**标准**：成功标准明确（如“返回{name: 'file.txt'}”），失败有应对。`<br>`**对**：按标准执行，帧率≥90，输出“对错定义通过”。`<br>`**错**：未定义或执行不符合，输出“对错未定义”并停止。                                                                                                         |
| **Step 3.1 拆解流程 - 大模块** | **动作**：Cursor将需求拆成≤5个大模块，每模块描述≥30字。`<br>`**标准**：描述清晰，存入 `./logs/step_3.1_logC.txt`。`<br>`**对**：拆解合理，输出“拆解完成”。`<br>`**错**：模块>5个或描述<30字，输出“拆解不当”并停止。                                                                                                                          |
| **Step 3.2 拆解流程 - 中模块** | **动作**：Cursor将每个大模块拆成≤4个中模块，每模块≥20字。`<br>`**标准**：中模块关联大模块，存入 `./logs/step_3.2_logC.txt`。`<br>`**对**：拆解合理，输出“中模块完成”。`<br>`**错**：中模块>4个或描述<20字，输出“中模块不当”并停止。                                                                                                          |
| **Step 3.3 拆解流程 - 小步骤** | **动作**：Cursor将每个中模块拆成≤5个小步骤，每步≥15字，代码<200行。`<br>`**标准**：小步骤可执行，存入 `./logs/step_3.3_logC.txt`。`<br>`**对**：每步独立，输出“小步骤完成”。`<br>`**错**：步骤>5个或代码≥200行，输出“小步骤不当”并停止。                                                                                                    |
| **Step 4.1 执行标准 - 需求**   | **动作**：Cursor读取需求文档，输出“已理解任务：XX”（≥30字）。`<br>`**标准**：与需求一致性≥95%。`<br>`**对**：理解正确，保存到 `./logs/step_4.1_logD.txt`。`<br>`**错**：偏差>5%，输出“需求误解”并停止。                                                                                                                                      |
| **Step 4.2 执行标准 - 建议**   | **动作**：Cursor生成6项建议（每项≥15字）。`<br>`**标准**：技术支持帧率≥90，代码<200行。`<br>`**对**：建议合理，保存到 `./logs/step_4.2_logD.txt`。`<br>`**错**：技术不支持或代码超标，输出“建议不当”并停止。                                                                                                                                   |
| **Step 4.3 执行标准 - 开发**   | **动作**：Cursor按logD开发代码，<200行，try-catch≥90%。`<br>`**标准**：无语法错误，帧率≥90。`<br>`**对**：开发完成，输出到 `./logs/step_4.3_logE.txt`。`<br>`**错**：语法错误>0或帧率<90，输出“开发失败”并停止。                                                                                                                               |
| **Step 4.4 执行标准 - 验证**   | **动作**：Cursor执行3场景测试，记录输入、输出、帧率。`<br>`**标准**：3场景全通过，帧率≥90。`<br>`**对**：测试通过，保存到 `./logs/step_4.4_logE.txt`。`<br>`**错**：任一场景失败，输出“验证失败：XX（原因）”并停止。                                                                                                                            |
| **Step 4.5 执行标准 - 总结**   | **动作**：Cursor总结开发情况，包含4项（每项≥15字）。`<br>`**标准**：与测试一致性≥95%。`<br>`**对**：总结完整，保存到 `./logs/step_4.5_logE.txt`。`<br>`**错**：不一致或缺失，输出“总结错误”并停止。                                                                                                                                            |
| **Step 5.1 错误预判**          | **动作**：Cursor预判常见错误（如帧率<90、响应>16ms），提缓解措施。`<br>`**标准**：措施有效（如优化setData）。`<br>`**对**：预判准确，输出“错误预判完成”。`<br>`**错**：未预判或措施无效，输出“错误预判不足”并停止。                                                                                                                              |
| **Step 6.1 时间规划**          | **动作**：Cursor按6天MVP规划，每日3步。`<br>`**标准**：核心模块Day1-5，测试上线Day6。`<br>`**对**：按时完成，输出“时间规划完成”。`<br>`**错**：延误，输出“延误：XX（原因）”并停止。                                                                                                                                                              |
| **Step 7.1 技术约束**          | **动作**：Cursor用LocalStorage（≥5MB），动效用 `wx.createAnimation`。`<br>`**标准**：响应<16ms，弱网帧率≥90。`<br>`**对**：技术达标，输出“技术约束通过”。`<br>`**错**：响应≥16ms或帧率<90，输出“技术不达标”并停止。                                                                                                                         |
| **Step 8.1 注意事项**          | **动作**：Cursor进行压力测试（50次并发，帧率≥90）。`<br>`**标准**：成功率≥99%，代码<5MB，依赖<2个。`<br>`**对**：测试通过，输出“注意事项通过”。`<br>`**错**：未达标，输出“注意事项失败：XX（问题）”并停止。                                                                                                                                    |
