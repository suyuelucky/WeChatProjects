# 工作留痕系统 - 开发文档索引

> **重要更新**: 从现在开始，所有AI开发会话都将执行全自动化开发流程。当收到"请阅读索引.md，你当前的任务是[任务代号]"指令时，AI开发者将自动执行完整开发流程，包括文档生成、上下文加载、代码开发、测试验证和文档总结，无需用户进一步干预即可完成全部工作。

## 全自动开发流程说明

当作为AI开发者接收到"请阅读索引.md，你当前的任务是XX"指令时，应立即执行以下全自动化流程：

1. **自动执行初始化脚本**:
   ```
   node session_init.js XX "任务描述"
   ```

2. **自动加载和理解相关文档**:
   - 阅读自动生成的上下文加载指南
   - 阅读任务相关的核心文档
   - 分析代码库当前状态

3. **自动进行开发计划**:
   - 补充开发计划文档的所有内容
   - 明确功能点分解、技术方案等

4. **自动实施开发**:
   - 按照小步快跑原则逐个功能点实现
   - 每完成一个功能点自动更新进度
   - 自动创建测试用例并执行验证

5. **自动完成文档与总结**:
   - 生成技术债务记录
   - 完成知识传递文档
   - 完成会话总结文档

整个过程高效、自动化，无需用户频繁干预，确保从任务接收到完成验证的全过程都能保持高质量标准。

## 文档目的

本索引文档旨在帮助AI助手有效导航工作留痕系统的开发文档集，使每个新会话的AI能够快速定位与当前任务相关的信息，避免消耗过多token阅读不相关内容。

## 如何使用本索引

1. **按需查询原则**: 当收到"请阅读索引.md，你当前的任务是[任务代号]"指示时，按照以下步骤操作：
   - 先阅读本索引文档
   - 查找与[任务代号]相关的内容部分
   - 按照索引提示，仅加载与当前任务直接相关的文档

2. **导航符号说明**:
   - 🔑 - 核心文档，任务相关时必读
   - 📌 - 相关文档，建议参考
   - ⚙️ - 技术规范，确保实现符合标准
   - 🧪 - 测试验证，用于功能检查

3. **任务代号体系**:
   - A系列: 基础架构层(如A1-基础应用架构)
   - B系列: 照片管理流(如B1-基础照片采集)
   - C系列: 文本处理流(如C1-文本填写组件)
   - D系列: 内容处理流(如D1-内容模板管理)
   - E系列: 留痕类型流(如E1-留痕类型选择)
   - F系列: AI功能流(如F1-语音识别服务)
   - G系列: 体验优化流(如G1-界面响应优化)

## 一、核心文档目录

### 1. 基础架构与系统设计

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [00-README.md](00-README.md) | 项目整体指引、文档结构说明、使用方法 | 所有任务 | 高 |
| 🔑 [01-系统架构设计.md](01-系统架构设计.md) | 系统整体架构、技术栈选择、核心设计决策 | A系列所有任务 | 高 |
| 🔑 [02-功能模块概览.md](02-功能模块概览.md) | 所有功能模块详细说明、依赖关系、MVP定义 | 所有任务 | 高 |
| 📌 [50-任务入口文档.md](50-任务入口文档.md) | 任务快速识别表、开发流程指引、核心知识集 | 任务规划阶段 | 中 |
| ⚙️ [67-循环依赖解决方案.md](67-循环依赖解决方案.md) | 微信小程序循环依赖问题解决方案 | A系列架构任务 | 中 |

#### 关键内容摘要:

- **系统架构**: 采用分层设计，包括UI层、业务逻辑层、数据层和服务层
- **技术栈**: 微信小程序原生开发，部分功能使用云开发能力
- **核心功能模块**: 留痕类型、照片采集与管理、文字录入与编辑、内容处理与发布
- **开发方法论**: 小步快跑，每个独立功能单元单独开发和验证 

### 2. 功能模块文档

#### 2.1 照片采集与管理模块 (B系列任务)

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [02-功能模块概览.md](02-功能模块概览.md) (PhotoMgmt部分) | 照片模块功能点、交互流程和依赖关系 | B系列所有任务 | 高 |
| ⚙️ [20-微信小程序适配策略.md](20-微信小程序适配策略.md) | 微信小程序相机API使用、性能优化 | B1-基础照片采集 | 高 |
| 📌 [25-性能优化策略.md](25-性能优化策略.md) | 图片压缩、延迟加载、列表优化策略 | B系列所有任务 | 中 |
| 🧪 [61-功能验证测试规范.md](61-功能验证测试规范.md) | B系列功能验证测试用例 | B系列所有任务 | 中 |

#### 关键内容摘要:

- **照片采集功能**: 快捷拍照机制、多种拍照模式、相机权限处理
- **照片处理功能**: 照片自动排列、分类存储、智能压缩
- **照片交互设计**: 长按交互、排序调整、分组展示
- **技术难点**: 相机调用优化、图片处理性能、隐私保护

#### 2.2 文字录入与编辑模块 (C系列任务)

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [02-功能模块概览.md](02-功能模块概览.md) (TextMgmt部分) | 文字模块功能点、交互流程和依赖关系 | C系列所有任务 | 高 |
| 📌 [04-AI功能实现方案.md](04-AI功能实现方案.md) | 语音识别、文本优化等AI增强能力 | C1-语音转文字 | 高 |
| ⚙️ [05-用户界面设计指南.md](05-用户界面设计指南.md) | 文本编辑界面设计、输入交互设计 | C系列所有任务 | 中 |
| 📌 [51-离线功能实现方案.md](51-离线功能实现方案.md) | 离线文本编辑、自动保存、同步策略 | C系列所有任务 | 中 |

#### 关键内容摘要:

- **文本输入功能**: 语音转文字、键盘输入、手写输入支持
- **编辑能力**: 富文本编辑、错别字修正、格式调整
- **图文关联**: 照片与文字关联机制、整体编辑能力
- **技术难点**: 语音识别准确率、富文本性能、离线支持 

#### 2.3 内容处理与发布模块 (D系列任务)

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [02-功能模块概览.md](02-功能模块概览.md) (ContentProcess部分) | 内容处理模块功能点、交互流程和依赖关系 | D系列所有任务 | 高 |
| 📌 [03-数据迁移与同步策略.md](03-数据迁移与同步策略.md) | 内容自动保存、多端同步、冲突解决方案 | D1-临时保存 | 高 |
| 📌 [04-AI功能实现方案.md](04-AI功能实现方案.md) | 内容润色、关键词提取等AI能力 | D2-AI润色 | 高 |
| 📌 [06-安全与隐私保护策略.md](06-安全与隐私保护策略.md) | 内容安全审核、敏感信息处理 | D系列所有任务 | 中 |
| 🧪 [61-功能验证测试规范.md](61-功能验证测试规范.md) | D系列功能验证测试用例 | D系列所有任务 | 中 |

#### 关键内容摘要:

- **内容保存功能**: 自动保存、草稿管理、多设备同步
- **内容处理功能**: AI润色、关键词提取、格式转换
- **内容发布功能**: 提交流程、审核机制、多格式支持
- **技术难点**: 同步冲突解决、AI服务质量、存储优化

#### 2.4 留痕类型分类模块 (E系列任务)

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [02-功能模块概览.md](02-功能模块概览.md) (TraceTypes部分) | 留痕类型模块功能点、交互流程和依赖关系 | E系列所有任务 | 高 |
| ⚙️ [05-用户界面设计指南.md](05-用户界面设计指南.md) | 类型选择界面设计、使用引导设计 | E系列所有任务 | 中 |
| 📌 [52-用户体验优化.md](52-用户体验优化.md) | 留痕类型交互优化、用户偏好学习 | E系列所有任务 | 中 |
| 🧪 [61-功能验证测试规范.md](61-功能验证测试规范.md) | E系列功能验证测试用例 | E系列所有任务 | 中 |

#### 关键内容摘要:

- **留痕类型功能**: 文章型留痕、事迹型留痕、类型特点
- **类型选择功能**: 选择界面、默认类型、快速切换
- **使用引导功能**: 首次使用引导、功能提示、帮助系统
- **技术难点**: 交互一致性、视觉统一性、个性化推荐

#### 2.5 AI功能增强模块 (F系列任务)

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [04-AI功能实现方案.md](04-AI功能实现方案.md) | AI能力设计、集成方案与降级策略 | F系列所有任务 | 高 |
| ⚙️ [22-版本兼容性策略.md](22-版本兼容性策略.md) | AI功能的兼容性和降级方案 | F系列所有任务 | 中 |
| 📌 [25-性能优化策略.md](25-性能优化策略.md) | AI功能的性能优化策略 | F系列所有任务 | 中 |
| 🧪 [61-功能验证测试规范.md](61-功能验证测试规范.md) | F系列功能验证测试用例 | F系列所有任务 | 中 |

#### 关键内容摘要:

- **语音识别功能**: 实时转换、专业术语支持、方言识别
- **内容增强功能**: 文本润色、格式优化、关键词提取
- **降级策略**: 离线处理、本地能力、服务不可用处理
- **技术难点**: 识别准确率、性能消耗、模型轻量化

## 二、技术规范与开发指南

### 1. 微信小程序开发规范

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| ⚙️ [20-微信小程序适配策略.md](20-微信小程序适配策略.md) | 小程序开发规范、API使用指南、平台限制 | 所有任务 | 高 |
| ⚙️ [22-版本兼容性策略.md](22-版本兼容性策略.md) | 低版本兼容处理、功能降级方案 | 所有任务 | 中 |
| ⚙️ [65-小程序特定实现参考.md](65-小程序特定实现参考.md) | 小程序常见功能实现参考代码 | 所有任务 | 中 |
| ⚙️ [67-循环依赖解决方案.md](67-循环依赖解决方案.md) | 小程序循环依赖问题解决方法 | 所有架构任务 | 高 |

#### 关键内容摘要:

- **代码兼容性**: 必须符合ES5标准，禁用高级特性，确保压缩通过
- **目录结构规范**: 严格遵循小程序标准目录结构，组件文件完整性
- **分包配置**: 主包控制在1MB以内，合理分配公共资源
- **API使用**: 确认API版本兼容性，提供降级方案

### 2. 性能与优化指南

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| ⚙️ [25-性能优化策略.md](25-性能优化策略.md) | 全面的性能优化策略和最佳实践 | 所有任务 | 中 |
| 📌 [51-离线功能实现方案.md](51-离线功能实现方案.md) | 离线工作模式实现、数据同步策略 | 数据处理任务 | 中 |
| 📌 [52-用户体验优化.md](52-用户体验优化.md) | 交互响应优化、加载体验改进 | UI相关任务 | 中 |
| ⚙️ [63-优化备忘录.md](63-优化备忘录.md) | 常见性能问题解决方案、优化技巧 | 所有任务 | 低 |

#### 关键内容摘要:

- **数据优化**: setData优化、数据分包、按需加载
- **渲染优化**: 列表虚拟化、延迟渲染、骨架屏
- **资源优化**: 图片压缩、字体优化、JS代码分割
- **网络优化**: 请求合并、缓存策略、预加载技术 

### 3. 测试与质量保障

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🧪 [10-测试策略.md](10-测试策略.md) | 整体测试策略、测试类型和方法 | 所有任务 | 中 |
| 🧪 [53-测试与质量保障计划.md](53-测试与质量保障计划.md) | 详细测试计划、质量标准和验证方法 | 所有任务 | 中 |
| 🧪 [61-功能验证测试规范.md](61-功能验证测试规范.md) | 各功能点的具体验证方法和检查项 | 所有任务 | 高 |
| 🧪 [68-自动化测试框架.md](68-自动化测试框架.md) | 自动化测试用例、快速验证工具 | 所有任务 | 中 |

#### 关键内容摘要:

- **测试策略**: 单元测试、集成测试、UI测试、性能测试
- **验证方法**: 每个功能点的验证步骤和预期结果
- **测试工具**: 模拟数据生成、测试环境设置、自动化测试
- **常见问题**: 测试过程中的常见问题和解决方案

### 4. AI开发指南

| 文档名称 | 内容概要 | 适用任务 | 优先级 |
|---------|---------|---------|-------|
| 🔑 [70-AI工业级开发流程规范.md](70-AI工业级开发流程规范.md) | 完整的AI开发工业级流程规范 | 所有任务 | 最高 |
| 📌 [62-AI开发序列指南.md](62-AI开发序列指南.md) | AI开发流程、会话结构、开发序列 | 所有任务 | 高 |
| 📌 [64-AI会话文档指南.md](64-AI会话文档指南.md) | AI会话管理方法、记录格式、提示词 | 所有任务 | 中 |
| 📌 [66-开发会话模板.md](66-开发会话模板.md) | 标准化开发会话模板和示例 | 所有任务 | 中 |
| 📌 [开发准备.md](开发准备.md) | 开发环境准备、必要工具和库 | 所有任务 | 中 |

#### 关键内容摘要:

- **工业级流程**: 完整的开发流程，包括开发前准备、计划、实施、测试和文档化
- **会话管理**: 每次会话的结构和token分配策略
- **开发序列**: 功能依赖关系和最优开发顺序
- **常见陷阱**: AI开发中的常见问题和避免方法
- **提示词模板**: 不同开发阶段的标准提示词

## 五、开发工具与脚本

| 工具/脚本 | 用途 | 使用方法 | 优先级 |
|---------|------|---------|-------|
| 🔧 [gen_dev_docs.js](gen_dev_docs.js) | 自动生成开发文档套件 | `node gen_dev_docs.js <任务代号> "<任务描述>"` | 高 |
| 🔧 [自动化测试框架](68-自动化测试框架.md) | 自动化测试用例执行 | 详见文档说明 | 中 |

### 文档生成工具说明

gen_dev_docs.js 脚本用于快速生成开发任务所需的全套文档，遵循AI工业级开发流程规范，包括：

1. **开发计划文档**: 详细的任务分解和技术方案
2. **测试用例文档**: 基本功能、边界条件、错误处理和极端情况测试
3. **技术债务记录**: 记录开发过程中的技术债务
4. **知识传递文档**: 用于会话间知识传递
5. **会话总结文档**: 记录会话成果和未完成工作

使用示例:
```bash
node gen_dev_docs.js B1 "基础照片采集功能"
```

此命令将在 `AI开发文档/B1-基础照片采集功能/` 目录下创建完整的文档套件。

## 三、任务索引对照表

下表提供任务代号与相关文档的快速对照，帮助AI快速定位所需资源：

| 任务代号 | 任务描述 | 必读文档 | 参考文档 |
|---------|---------|---------|---------|
| A1 | 基础应用架构 | 01-系统架构设计.md | 67-循环依赖解决方案.md |
| A2 | 本地存储管理 | 02-功能模块概览.md(数据层部分) | 51-离线功能实现方案.md |
| A3 | 网络请求管理 | 02-功能模块概览.md(网络层部分) | 20-微信小程序适配策略.md |
| A4 | 数据同步框架 | 03-数据迁移与同步策略.md | 51-离线功能实现方案.md |
| B1 | 基础照片采集 | 02-功能模块概览.md(PhotoMgmt部分) | 20-微信小程序适配策略.md |
| B2 | 照片编辑标注 | 02-功能模块概览.md(PhotoMgmt部分) | 65-小程序特定实现参考.md |
| B3 | 照片分组管理 | 02-功能模块概览.md(PhotoMgmt部分) | 25-性能优化策略.md |
| B4 | 照片智能处理 | 02-功能模块概览.md(PhotoMgmt部分) | 04-AI功能实现方案.md |
| C1 | 文本填写组件 | 02-功能模块概览.md(TextMgmt部分) | 05-用户界面设计指南.md |
| C2 | 富文本编辑器 | 02-功能模块概览.md(TextMgmt部分) | 65-小程序特定实现参考.md |
| C3 | 语音转文字 | 02-功能模块概览.md(TextMgmt部分) | 04-AI功能实现方案.md |
| C4 | 图文关联管理 | 02-功能模块概览.md(TextMgmt部分) | 51-离线功能实现方案.md |
| D1 | 内容模板管理 | 02-功能模块概览.md(ContentProcess部分) | 03-数据迁移与同步策略.md |
| D2 | 智能内容润色 | 02-功能模块概览.md(ContentProcess部分) | 04-AI功能实现方案.md |
| D3 | 自动保存机制 | 02-功能模块概览.md(ContentProcess部分) | 51-离线功能实现方案.md |
| D4 | 内容导出发布 | 02-功能模块概览.md(ContentProcess部分) | 06-安全与隐私保护策略.md |
| E1 | 留痕类型选择 | 02-功能模块概览.md(TraceTypes部分) | 52-用户体验优化.md |
| E2 | 模板定制功能 | 02-功能模块概览.md(TraceTypes部分) | 05-用户界面设计指南.md |
| E3 | 使用引导系统 | 02-功能模块概览.md(TraceTypes部分) | 52-用户体验优化.md |
| F1 | 语音识别服务 | 04-AI功能实现方案.md | 22-版本兼容性策略.md |
| F2 | 内容润色功能 | 04-AI功能实现方案.md | 06-安全与隐私保护策略.md |
| F3 | 关键词提取 | 04-AI功能实现方案.md | 25-性能优化策略.md |
| G1 | 界面响应优化 | 52-用户体验优化.md | 25-性能优化策略.md |
| G2 | 离线体验优化 | 51-离线功能实现方案.md | 63-优化备忘录.md |
| G3 | 性能全面优化 | 25-性能优化策略.md | 63-优化备忘录.md |

## 四、使用示例

### 示例1: 开发照片采集功能(B1任务)

当接到"请阅读索引.md，你当前的任务是B1"指令时，应采取以下行动：

1. **先了解任务范围**：
   - 查阅任务索引对照表找到B1对应的"基础照片采集"任务
   - 注意必读文档为"02-功能模块概览.md(PhotoMgmt部分)"

2. **加载核心文档**：
   - 读取02-功能模块概览.md中的PhotoMgmt部分
   - 了解快捷拍照机制、照片存储等核心功能点

3. **了解技术规范**：
   - 读取20-微信小程序适配策略.md中相关内容
   - 了解微信小程序相机API使用限制和最佳实践

4. **查找测试要求**：
   - 读取61-功能验证测试规范.md中B1相关测试项
   - 了解功能完成后的验证检查点

5. **参考AI开发指南**：
   - 按照62-AI开发序列指南.md的会话结构安排开发流程
   - 遵循小步开发模式，先实现相机调用，再实现图片保存等

### 示例2: 开发文本编辑功能(C1任务)

当接到"请阅读索引.md，你当前的任务是C1"指令时：

1. **先了解任务范围**：
   - 查阅任务索引对照表找到C1对应的"文本填写组件"任务
   - 必读文档为"02-功能模块概览.md(TextMgmt部分)"

2. **加载核心文档**：
   - 读取02-功能模块概览.md中的TextMgmt部分
   - 了解文本输入、富文本编辑等核心功能点

3. **了解界面设计**：
   - 读取05-用户界面设计指南.md中相关内容
   - 了解文本编辑界面设计标准和交互要求

4. **了解AI能力**：
   - 若需实现语音转文字，可阅读04-AI功能实现方案.md

5. **查找测试要求**：
   - 读取61-功能验证测试规范.md中C1相关测试项
   - 确定功能完成标准和验证方法

## 结语

本索引文档为AI助手提供了工作留痕系统开发文档的结构化导航，旨在帮助每次新会话的AI能够：

1. **按需加载**：仅加载与当前任务直接相关的文档，节省上下文空间
2. **快速定位**：通过任务代号和功能描述快速找到相关资源
3. **全面理解**：获取每个功能模块的核心概念、技术要点和实现难点
4. **标准执行**：明确了解每个任务的开发标准和验证要求

遵循本索引文档指引的开发流程，能够有效提高AI开发效率，保障代码质量，确保每个独立功能单元符合项目整体要求。

---

最后更新：2024年4月
版本：1.0 