# B1-照片采集功能测试用例

> **重要说明**: 本文档详细描述了B1基础照片采集功能的测试用例，包括测试目标、测试环境、测试用例详情和测试结果记录模板。测试人员应按照此文档执行测试，确保功能的质量和稳定性。

## 1. 测试概述

### 1.1 测试目标

本测试计划旨在验证工作留痕系统中照片采集功能的正确性、稳定性和性能表现，具体目标包括：

1. **功能完整性**: 验证所有功能点按照需求规格实现并正常运行
2. **异常处理**: 验证在各种异常情况下系统能够正确处理并恢复
3. **性能指标**: 验证系统在各种环境下的性能指标符合要求
4. **兼容适配**: 验证在目标设备和系统版本上的兼容性表现
5. **用户体验**: 评估功能的易用性和操作流畅度

### 1.2 测试范围

本次测试覆盖照片采集功能的以下方面：

1. **相机控制**: 相机初始化、拍照、预览等基本功能
2. **照片管理**: 照片存储、查看、删除等管理功能
3. **上传功能**: 照片上传、进度显示、失败处理等网络功能
4. **异常处理**: 各种异常场景的处理能力
5. **性能表现**: 资源占用、响应时间等性能指标
6. **安全稳定性**: 数据安全和系统稳定性

### 1.3 测试策略

采用以下测试策略确保测试的全面性和有效性：

1. **功能测试**: 验证每个功能点的正确实现
2. **场景测试**: 模拟实际用户使用场景进行端到端测试
3. **异常测试**: 针对各种异常情况的容错性测试
4. **边界测试**: 针对输入和状态边界条件的测试
5. **性能测试**: 对性能指标进行定量测试
6. **兼容性测试**: 在不同设备和系统版本上进行测试

## 2. 测试环境

### 2.1 测试设备

| 设备类型 | 设备型号 | 操作系统 | 屏幕尺寸 | 分辨率 | 内存 |
|---------|---------|---------|---------|--------|-----|
| iOS高端 | iPhone 14 Pro | iOS 16.0 | 6.1寸 | 1179×2556 | 6GB |
| iOS中端 | iPhone 11 | iOS 15.5 | 6.1寸 | 828×1792 | 4GB |
| iOS入门 | iPhone 8 | iOS 15.4 | 4.7寸 | 750×1334 | 2GB |
| 安卓高端 | 华为Mate 50 Pro | HarmonyOS 3.0 | 6.74寸 | 1212×2616 | 8GB |
| 安卓中端 | 小米12 | Android 12 | 6.28寸 | 1080×2400 | 8GB |
| 安卓入门 | OPPO A57 | Android 10 | 6.56寸 | 720×1612 | 4GB |

### 2.2 网络环境

| 网络类型 | 下载速度 | 上传速度 | 延迟 | 丢包率 | 测试工具 |
|---------|---------|---------|-----|-------|---------|
| 优质WiFi | 100Mbps | 30Mbps | 15ms | <0.1% | Speedtest |
| 普通WiFi | 20Mbps | 8Mbps | 50ms | 0.5% | Speedtest |
| 5G网络 | 200Mbps | 50Mbps | 25ms | 0.3% | 5G测速 |
| 4G网络 | 10Mbps | 5Mbps | 80ms | 1% | 网络测试 |
| 弱网环境 | 2Mbps | 1Mbps | 200ms | 3% | 网络模拟器 |
| 网络波动 | 0-15Mbps | 0-5Mbps | 50-300ms | 0-10% | 网络模拟器 |

### 2.3 测试账号与权限

| 账号类型 | 账号ID | 权限级别 | 使用场景 |
|---------|-------|---------|---------|
| 管理员账号 | admin001 | 全部权限 | 管理功能测试 |
| 普通用户账号 | user001 | 基础权限 | 常规功能测试 |
| 受限用户账号 | limited001 | 有限权限 | 权限边界测试 |
| 新注册账号 | new001 | 初始权限 | 新用户体验测试 |

### 2.4 测试工具

| 工具类型 | 工具名称 | 用途 | 版本 |
|---------|---------|-----|------|
| 自动化测试 | WeChatDevTools | 小程序自动化测试 | 1.06.2303220 |
| 性能监控 | Performance Monitor | 资源占用监控 | 2.5.0 |
| 网络模拟 | Network Simulator | 网络环境模拟 | 3.1.2 |
| 兼容性测试 | DeviceAnywhere | 真机远程测试 | 2023版 |
| 问题跟踪 | JIRA | 缺陷管理 | Cloud版 |
| 截图录屏 | ScreenCapture Pro | 测试过程记录 | 4.2.1 |

### 2.5 测试数据

| 数据类型 | 数据量 | 用途 | 获取方式 |
|---------|-------|-----|---------|
| 标准测试照片集 | 50张不同尺寸照片 | 照片处理测试 | 预置测试资源 |
| 极限尺寸照片 | 10张高分辨率照片 | 边界测试 | 预置测试资源 |
| 特殊格式照片 | 各格式样例照片 | 兼容性测试 | 预置测试资源 |
| 模拟生产数据 | 1000条照片记录 | 性能测试 | 数据生成脚本 |

## 3. 详细测试用例

### 3.1 相机功能测试

#### TC-CAM-001: 相机初始化与预览

**测试目标**: 验证相机组件能够正确初始化并显示预览画面  
**前置条件**: 应用已安装，用户已登录  
**测试步骤**:
1. 打开照片采集页面
2. 观察相机预览画面
3. 等待10秒检查预览稳定性
4. 切换前后摄像头
5. 旋转设备检查方向适配

**预期结果**:
1. 相机预览正常显示
2. 预览画面清晰流畅，无卡顿
3. 切换摄像头成功，画面正确切换
4. 横竖屏切换时预览正常适配

**优先级**: 高  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 部分步骤可自动化

#### TC-CAM-002: 相机权限管理

**测试目标**: 验证相机权限申请和处理流程  
**前置条件**: 应用已安装，用户初次使用或已拒绝权限  
**测试步骤**:
1. 清除应用权限记录
2. 打开照片采集页面
3. 观察权限申请提示
4. 分别测试接受和拒绝权限的情况
5. 测试二次申请权限流程

**预期结果**:
1. 权限申请提示清晰明确
2. 接受权限后相机正常启动
3. 拒绝权限时显示友好提示并提供解决方案
4. 二次申请权限流程符合用户体验要求

**优先级**: 高  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 低，需手动操作系统权限设置

#### TC-CAM-003: 拍照基本功能

**测试目标**: 验证拍照功能的基本操作和结果  
**前置条件**: 相机已正常初始化  
**测试步骤**:
1. 点击拍照按钮
2. 检查拍照过程中的UI反馈
3. 检查拍照结果预览
4. 进行连续拍照操作(5张)
5. 检查每张照片的存储结果

**预期结果**:
1. 拍照操作响应迅速(<300ms)
2. 有明确的拍照成功视觉反馈
3. 照片预览质量清晰
4. 连续拍照过程稳定
5. 所有照片正确保存

**优先级**: 高  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 中等，可通过UI自动化测试

#### TC-CAM-004: 相机高级设置

**测试目标**: 验证相机的高级设置功能  
**前置条件**: 相机已正常初始化  
**测试步骤**:
1. 打开相机设置界面
2. 调整闪光灯设置(关闭/自动/开启)
3. 切换拍摄模式(普通/高清)
4. 调整其他可用设置
5. 在每种设置下拍照并检查结果

**预期结果**:
1. 设置界面显示正常
2. 闪光灯设置生效
3. 不同拍摄模式下照片质量符合预期
4. 所有设置调整后正确保存
5. 设置持久化，再次进入应用设置保持

**优先级**: 中  
**测试环境要求**: 所有支持闪光灯的设备  
**自动化可行性**: 中等，可通过UI自动化测试

#### TC-CAM-005: 极端光线条件测试

**测试目标**: 验证在不同光线条件下相机的表现  
**前置条件**: 相机已正常初始化  
**测试步骤**:
1. 在标准光线条件下拍照
2. 在低光环境下拍照
3. 在强光/逆光环境下拍照
4. 在光线快速变化的环境下拍照
5. 检查各种条件下的照片质量

**预期结果**:
1. 标准光线下照片清晰
2. 低光环境下有提示或增强功能
3. 强光/逆光下有适当曝光调整
4. 光线变化时相机能够快速适应
5. 各种光线条件下照片可用性达标

**优先级**: 中  
**测试环境要求**: 可控光线环境  
**自动化可行性**: 低，需真实环境测试

### 3.2 照片存储测试

#### TC-STR-001: 照片基本存储功能

**测试目标**: 验证照片能够正确存储到本地  
**前置条件**: 已完成拍照操作  
**测试步骤**:
1. 拍摄一张照片
2. 检查本地存储目录
3. 验证照片元数据(拍摄时间、大小等)
4. 在照片列表中查找该照片
5. 打开照片详情查看

**预期结果**:
1. 照片正确存储在指定目录
2. 照片文件完整无损
3. 元数据记录准确
4. 照片在列表中正确显示
5. 详情页显示完整信息

**优先级**: 高  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 高，可通过文件系统检查自动化

#### TC-STR-002: 照片存储空间管理

**测试目标**: 验证系统对存储空间的管理能力  
**前置条件**: 设备存储空间可控  
**测试步骤**:
1. 检查当前存储空间使用情况
2. 拍摄照片直至接近存储限制
3. 观察系统提示和处理
4. 测试清理过期照片功能
5. 验证存储空间回收情况

**预期结果**:
1. 系统准确显示存储使用情况
2. 接近限制时有明确提示
3. 提供存储空间管理选项
4. 清理功能正常工作
5. 存储空间成功回收

**优先级**: 中  
**测试环境要求**: 存储空间受限设备  
**自动化可行性**: 中等，需模拟存储空间变化

#### TC-STR-003: 大尺寸照片处理

**测试目标**: 验证系统对大尺寸照片的处理能力  
**前置条件**: 相机设置为高清模式  
**测试步骤**:
1. 设置最高分辨率拍摄模式
2. 拍摄大尺寸照片(>5MB)
3. 检查照片存储情况
4. 检查照片预览加载性能
5. 验证大照片的上传处理

**预期结果**:
1. 大尺寸照片正确保存
2. 预览加载时间可接受(<2秒)
3. 内存占用在合理范围内
4. 上传过程有进度指示
5. 无明显卡顿或崩溃风险

**优先级**: 中  
**测试环境要求**: 高端设备  
**自动化可行性**: 中等，可通过性能监控自动化

#### TC-STR-004: 照片安全性测试

**测试目标**: 验证照片存储的安全性  
**前置条件**: 已存储多张照片  
**测试步骤**:
1. 检查照片存储路径的安全性
2. 验证照片访问需要授权
3. 测试应用卸载后照片的处理
4. 检查照片元数据是否包含敏感信息
5. 验证不同用户间照片隔离

**预期结果**:
1. 照片存储在安全目录
2. 未授权应用无法访问照片
3. 应用卸载有数据处理策略
4. 元数据不含敏感个人信息
5. 用户间照片完全隔离

**优先级**: 高  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 中等，部分可自动化

### 3.3 上传功能测试

#### TC-UPL-001: 单张照片上传

**测试目标**: 验证单张照片的上传功能  
**前置条件**: 已拍摄并存储照片，网络连接正常  
**测试步骤**:
1. 选择一张照片进行上传
2. 观察上传进度显示
3. 检查上传过程中的网络使用情况
4. 验证上传完成后的状态更新
5. 检查服务器端照片存储情况

**预期结果**:
1. 上传流程顺利启动
2. 上传进度实时准确显示
3. 网络使用合理
4. 上传完成后状态正确更新
5. 服务器成功接收并存储照片

**优先级**: 高  
**测试环境要求**: 所有网络环境  
**自动化可行性**: 高，可通过脚本自动化

#### TC-UPL-002: 批量照片上传

**测试目标**: 验证多张照片批量上传功能  
**前置条件**: 已拍摄并存储多张照片(>10张)，网络连接正常  
**测试步骤**:
1. 选择多张照片进行批量上传
2. 观察整体进度和单张进度显示
3. 检查上传队列管理
4. 测试上传过程中的排序调整
5. 验证全部完成后的状态更新

**预期结果**:
1. 批量上传正确启动
2. 进度显示准确反映整体和单张状态
3. 上传队列按预期管理
4. 可调整队列顺序且生效
5. 全部完成后状态正确更新

**优先级**: 中  
**测试环境要求**: 所有网络环境  
**自动化可行性**: 高，可通过脚本自动化

#### TC-UPL-003: 弱网环境上传测试

**测试目标**: 验证在弱网环境下上传功能的可靠性  
**前置条件**: 配置弱网环境(带宽<2Mbps，延迟>200ms)  
**测试步骤**:
1. 在弱网环境下启动上传
2. 观察上传速度和稳定性
3. 测试网络波动时的表现
4. 测试短暂断网后恢复的处理
5. 长时间上传的稳定性

**预期结果**:
1. 上传能够在弱网环境下进行
2. 有合理的超时和重试机制
3. 网络波动时能够自动处理
4. 断网后恢复能够继续上传
5. 长时间上传保持稳定

**优先级**: 高  
**测试环境要求**: 弱网和不稳定网络环境  
**自动化可行性**: 中等，需网络模拟器

#### TC-UPL-004: 上传失败处理

**测试目标**: 验证上传失败时的处理机制  
**前置条件**: 配置可控的上传失败场景  
**测试步骤**:
1. 模拟服务器拒绝上传
2. 模拟网络中断导致上传失败
3. 模拟上传超时
4. 测试失败后重试功能
5. 验证失败通知和用户反馈

**预期结果**:
1. 各类失败有明确错误提示
2. 提供重试选项
3. 重试机制正常工作
4. 多次失败有最大尝试次数限制
5. 用户能够理解并处理上传问题

**优先级**: 高  
**测试环境要求**: 可控失败环境  
**自动化可行性**: 高，可通过模拟服务器响应自动化

#### TC-UPL-005: 上传进度保存与恢复

**测试目标**: 验证上传进度的持久化和恢复功能  
**前置条件**: 正在进行多张照片上传  
**测试步骤**:
1. 启动多张照片上传
2. 上传过程中强制关闭应用
3. 重新打开应用
4. 检查上传任务恢复情况
5. 验证已上传和未上传照片的状态

**预期结果**:
1. 上传进度正确保存
2. 重启应用后能够识别未完成任务
3. 提供恢复上传选项
4. 恢复后继续从断点上传
5. 已上传照片状态保持正确

**优先级**: 中  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 中等，需模拟应用生命周期

### 3.4 性能与稳定性测试

#### TC-PERF-001: 照片采集性能测试

**测试目标**: 测量照片采集过程中的性能指标  
**前置条件**: 相机功能正常运行  
**测试步骤**:
1. 启动性能监控工具
2. 执行连续拍照操作(20张)
3. 记录每次拍照的响应时间
4. 监控内存和CPU使用情况
5. 观察连续操作过程中的稳定性

**预期结果**:
1. 拍照响应时间稳定，平均<300ms
2. 内存使用增长可控，无明显泄漏
3. CPU使用率在合理范围(<30%)
4. 连续操作无卡顿或崩溃
5. 所有性能指标符合目标要求

**优先级**: 高  
**测试环境要求**: 所有测试设备，特别关注低端设备  
**自动化可行性**: 高，可使用性能监控工具自动化

#### TC-PERF-002: 批量操作性能测试

**测试目标**: 验证批量照片操作的性能表现  
**前置条件**: 已存储大量照片(>100张)  
**测试步骤**:
1. 加载照片列表页面，记录加载时间
2. 执行批量选择操作(50张)，记录响应时间
3. 批量应用操作(删除/上传)，监控性能
4. 切换列表视图模式，记录切换性能
5. 测试长列表滚动性能

**预期结果**:
1. 列表加载时间<2秒
2. 批量选择操作流畅
3. 批量操作期间UI保持响应
4. 视图切换无明显卡顿
5. 长列表滚动流畅，无跳帧

**优先级**: 中  
**测试环境要求**: 中低端设备  
**自动化可行性**: 中等，部分可自动化

#### TC-PERF-003: 长时间运行稳定性测试

**测试目标**: 验证应用长时间运行的稳定性  
**前置条件**: 应用处于正常运行状态  
**测试步骤**:
1. 启动应用并持续运行4小时
2. 周期性执行拍照-存储-上传流程
3. 监控内存使用趋势
4. 记录电池消耗情况
5. 检查长时间运行后的功能正常性

**预期结果**:
1. 应用持续稳定运行，无崩溃
2. 内存使用保持稳定，无持续增长
3. 电池消耗合理
4. 长时间运行后各功能正常
5. 无明显性能下降

**优先级**: 中  
**测试环境要求**: 代表性设备  
**自动化可行性**: 中等，需专门的稳定性测试框架

#### TC-PERF-004: 资源占用测试

**测试目标**: 评估应用对设备资源的占用情况  
**前置条件**: 干净的测试环境  
**测试步骤**:
1. 测量应用安装大小
2. 记录启动时间和初始资源占用
3. 不同操作下的内存峰值监控
4. 后台运行时的资源占用
5. 与同类应用资源占用比较

**预期结果**:
1. 安装包大小<10MB
2. 启动时间<3秒
3. 内存峰值<100MB
4. 后台占用资源最小化
5. 资源占用优于或等于同类应用

**优先级**: 中  
**测试环境要求**: 所有测试设备  
**自动化可行性**: 高，使用性能监控工具

## 4. 测试执行与报告

### 4.1 测试结果记录模板

| 测试用例ID | 测试日期 | 测试人员 | 测试环境 | 测试结果 | 失败原因 | 问题严重性 | 修复状态 |
|-----------|---------|----------|---------|----------|----------|------------|----------|
| TC-XXX-NNN | YYYY-MM-DD | 姓名 | 设备型号/OS | 通过/失败 | 描述 | 低/中/高/严重 | 待修复/已修复 |

### 4.2 缺陷报告模板

**缺陷ID**: BUG-XXX  
**关联测试用例**: TC-XXX-NNN  
**缺陷标题**: 简短描述问题  
**发现日期**: YYYY-MM-DD  
**报告人**: 姓名  
**严重程度**: 低/中/高/严重  
**优先级**: 低/中/高  
**状态**: 新建/已分配/修复中/已修复/已验证  

**环境信息**:
- 设备型号:
- 操作系统版本:
- 应用版本:
- 网络环境:

**问题描述**:
详细描述问题的表现和影响

**重现步骤**:
1. 第一步
2. 第二步
3. ...

**预期结果**:
描述正确的行为应该是什么

**实际结果**:
描述实际观察到的错误行为

**附件**:
截图/日志/视频等

**备注**:
其他相关信息

### 4.3 测试报告大纲

**测试摘要**:
- 测试周期和时间
- 测试范围概述
- 测试执行统计
- 主要发现和结论

**测试详情**:
- 测试环境
- 测试用例覆盖情况
- 测试执行情况
- 测试中发现的缺陷

**缺陷统计与分析**:
- 缺陷数量统计
- 缺陷严重程度分布
- 缺陷类型分析
- 缺陷修复情况

**性能测试结果**:
- 关键性能指标
- 性能基准比较
- 性能瓶颈分析

**测试结论**:
- 质量评估
- 剩余风险
- 发布建议

**后续行动**:
- 未解决问题跟踪
- 建议改进点
- 下一步测试计划

---

创建日期: 2025-04-07  
最后更新: 2025-04-07 